# 现金流贴现法

原版公式：

$$V_0=\frac{C_1}{(1+i_1)}+\frac{C_2}{(1+i_1)(1+i_2)}+,...,+\frac{C_n+F}{\prod_{i=1}^n(1+i_j)}$$
- $C_t$为第t期票息
- $i_t$为第t期市场利率
- F为债券面值（Face Value）

简化公式：每期利息相同，只有一种利率，到期支付本金

$$
V_0=\sum_{t=1}^{n}\frac{\mathrm{C}}{(1+i)^{t}}+\frac{F}{(1+i)^{n}}
$$

> [!例题]
> 假设有一张面值为1,000元的债券，每年付息一次，票面利率为8%。该债券在3年后到期（到期时支付最后一年的利息和本金）。现在市场对于该债券所要求的必要报酬率（折现率）为10%。请计算该债券当前的价值。

**【解答】**
第1年末获得利息80元，第2年末获得利息80元，第3年末获得利息80元 + 本金1,000元，合计1,080元。
第1年现金流的现值：80 × 0.90909 ≈ 72.73元（0.0909 = 1/108%）
第2年现金流的现值：80 × 0.82645 ≈ 66.12元
第3年现金流(80 + 1,000 = 1,080元)的现值：1,080 × 0.75131 ≈ 811.19元

# 浮动利率债券定价

$$
V_{fl}=\frac{(F+k^{*})}{(1+\frac{r_{1}}{m})^{(1-t)}}
$$
- F为债券面值（Face Value）
- $k^{\ast}$ 下一期支付的票息金额。由于浮动利率债券的票息根据市场利率调整，通常基于债券的参考利率计算，例如 LIBOR 或 SOFR。
- $\frac{r_1}{m}$指当期利率除以复利周期。
-  1-t ：距离下一次支付或到期的时间，t 指上一次付息到今天的时间占复利周期的比重

>[!例题]
>一个剩余期限9年零11个月、面值为100元的浮动利率债券，票面利率为3个月期的LIBOR，票息每三个月支付一次。上一次付息日的3个月LIBOR为2.55%（三个月支付一次），今天的两个月期LIBOR为2.46%（2个月支付一次)，试求该债券的合理价格。

**【解答】**
- $k^{\ast}=100\times \frac{2.55\%}{4} =0.6375$
- $\frac{r_1}{m}=\frac{2.46\%}{4}$
- $1-t = 1-1/3$

# 债券的收益率

## 连续复利

$FV=PV\times(1+\frac{r}{n})^{mn}$

PV = 投资现值 
r = 规定年利率 
n = 一年的计息次数
m = 年数

$n\rightarrow \infty$ 时， $FV=PV\cdot e^{mr}$

## 即期收益率

购买债券时获得的折价收益与债券当前价格的比率。每年利息收入 / 债券当前价格

## 到期收益率（YTM）

自购买日（不等于债券发行日）至到期日所有收入的平均回报率，包含：

- 每一期现金流
- 今天的投资价格和未来的面值之间的资本利得
- 每一期现金流的再投资收益

到期收益率是否实现取决于三个条件：

- 持有债券到期
- 无违约
- 收到利息后以到期收益率进行再投资

### YTM 计算

若已知债券当前购买价格 P，面值为F，现在距离到期时间为 n 年，每年支付的利息总额为C，1年内共分m次付息，则满足下式的y就是到期收益率

$$P_0=\frac{F}{\left(1+\frac{y}{m}\right)^{mn}}+\sum_{t=1}^{mn}\frac{C/m}{\left(1+\frac{y}{m}\right)^t}$$
>[!例题一]
>某纯贴现债券到期年限2年，面值1000元，当前价格907.3元，求YTM。

$$
907.03=\frac{1000}{\left( 1+r \right)^{2}}
$$
解出此方程 r 即为 YTM = 5%

>[!例题二]
>某附息债券到期年限2年，面值1000元，票面利率6%，当前价格1019.7元，求YTM


$$
1019.7=\frac{1000\times 6\%}{\left( 1+r \right)} +\frac{1000\times 6\%}{\left( 1+r \right)^{2}} +\frac{1000}{\left( 1+r \right)^{2}}
$$
解出此方程 r 即为 YTM = 4.9414%

> [!扩展]
> 根据前两题信息，确定一种到期期限一年、面值 1000 元的纯贴现债券的价格和 YTM


第一步：将例题二的第二年票息及本金根据计算出来的 YTM 进行贴现，将第一年的收益率定为未知数解方程，得到 YTM

$$
1019.7=\frac{60}{\left( 1+r \right)} +\frac{60}{\left( 1+r_{1} \right)^{2}} +\frac{1000}{\left( 1+r_{1} \right)^{2}}
$$
解得 r = 4.99%

第二步：利用前一步的 r 进行一年期贴现，得到价格 $P=\frac{1000}{1+r} \approx 952.38$

